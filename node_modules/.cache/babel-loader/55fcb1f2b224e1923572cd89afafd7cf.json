{"ast":null,"code":"import _regeneratorRuntime from \"/Users/el20064544/projects/dublin-weather/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/el20064544/projects/dublin-weather/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/Users/el20064544/projects/dublin-weather/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/el20064544/projects/dublin-weather/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/el20064544/projects/dublin-weather/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/el20064544/projects/dublin-weather/src/components/Weather/Weather.js\";\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  width: 100%;\\n  justify-content: center;\\n\\n  @media(max-width: 75em) {\\n    flex-direction: column;\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from \"react\";\nimport _ from \"lodash\";\nimport CardDetail from \"../CardDetail/CardDetail\";\nimport { fetchForecast } from \"../../api/weatherApi\";\nimport styled from \"styled-components\";\nimport Forecast from \"../Forecast/Forecast\";\nconst Container = styled.div(_templateObject());\n\nconst Weather = ({\n  lat,\n  lng,\n  address\n}) => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        forecast = _useState2[0],\n        setForecast = _useState2[1];\n\n  const _useState3 = useState({}),\n        _useState4 = _slicedToArray(_useState3, 2),\n        selectedCard = _useState4[0],\n        setSelectedCard = _useState4[1];\n\n  const _useState5 = useState({}),\n        _useState6 = _slicedToArray(_useState5, 2),\n        selectedDay = _useState6[0],\n        setSelectedDay = _useState6[1];\n\n  useEffect(() => {\n    const fetchData = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var result, mapped_days, weather_days;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetchForecast(lat, lng);\n\n            case 2:\n              result = _context.sent;\n              mapped_days = _.mapValues(result, element => {\n                return _objectSpread({}, element, {\n                  date_label: new Date(element.dt * 1000).getUTCDate()\n                });\n              });\n              weather_days = _.mapValues(_.groupBy(mapped_days, \"date_label\"));\n              setForecast(weather_days);\n              setSelectedCard(mapped_days[0]);\n              console.log(weather_days); // setSelectedDay(mapped_days[0]);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n\n      return function fetchData() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetchData();\n  }, [lat, lng]);\n\n  const isToday = date => {\n    const today = new Date().getUTCDate();\n    return today === date;\n  };\n\n  const handleOnSelectCard = (card, day) => {\n    setSelectedCard(card);\n    setSelectedDay(forecast[day]);\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardDetail, {\n    selectedDay: selectedDay,\n    selected_card: selectedCard,\n    isToday: isToday(selectedCard.date_label),\n    address: address,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Forecast, {\n    forecast: forecast,\n    onChangeTime: (card, day) => {\n      handleOnSelectCard(card, day);\n    },\n    isToday: isToday,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Weather;","map":{"version":3,"sources":["/Users/el20064544/projects/dublin-weather/src/components/Weather/Weather.js"],"names":["React","useState","useEffect","_","CardDetail","fetchForecast","styled","Forecast","Container","div","Weather","lat","lng","address","forecast","setForecast","selectedCard","setSelectedCard","selectedDay","setSelectedDay","fetchData","result","mapped_days","mapValues","element","date_label","Date","dt","getUTCDate","weather_days","groupBy","console","log","isToday","date","today","handleOnSelectCard","card","day"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport _ from \"lodash\";\nimport CardDetail from \"../CardDetail/CardDetail\";\nimport { fetchForecast } from \"../../api/weatherApi\";\nimport styled from \"styled-components\";\n\nimport Forecast from \"../Forecast/Forecast\";\n\nconst Container = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: center;\n\n  @media(max-width: 75em) {\n    flex-direction: column;\n  }\n`;\n\nconst Weather = ({ lat, lng, address }) => {\n  const [forecast, setForecast] = useState([]);\n  const [selectedCard, setSelectedCard] = useState({});\n  const [selectedDay, setSelectedDay] = useState({});\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await fetchForecast(lat, lng);\n\n      const mapped_days = _.mapValues(result, (element) => {\n        return {\n          ...element,\n          date_label: new Date(element.dt * 1000).getUTCDate(),\n        };\n      });\n\n      const weather_days = _.mapValues(_.groupBy(mapped_days, \"date_label\"));\n      setForecast(weather_days);\n      setSelectedCard(mapped_days[0]);\n      console.log(weather_days)\n      // setSelectedDay(mapped_days[0]);\n    };\n\n    fetchData();\n  }, [lat, lng]);\n\n  const isToday = (date) => {\n    const today = new Date().getUTCDate();\n    return today === date;\n  };\n\n  const handleOnSelectCard = (card, day) => {\n    setSelectedCard(card);\n    setSelectedDay(forecast[day]);\n  }\n\n  return (\n    <Container>\n      <CardDetail\n        selectedDay={selectedDay}\n        selected_card={selectedCard}\n        isToday={isToday(selectedCard.date_label)}\n        address={address}\n      />\n      <Forecast\n        forecast={forecast}\n        onChangeTime={(card, day)=>{handleOnSelectCard(card, day);}}\n        isToday={isToday}\n      />\n    </Container>\n  );\n};\n\nexport default Weather;"]},"metadata":{},"sourceType":"module"}